{
  "permissions": {
    "allow": [
      "Bash(node:*)",
      "Bash(npm install:*)",
      "Bash(DATABASE_PASSWORD=\"162497\" node scripts/exec-sql.cjs:*)",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node scripts/exec-sql.cjs:*)",
      "Bash(npm run build:*)",
      "Bash(npx vue-tsc:*)",
      "Bash(npm run deploy:functions:*)",
      "Bash(npm run gen:types:*)",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const res = await client.query(''SELECT slug, label FROM news_topics ORDER BY label'');\n  console.log(''Topics disponibles:'');\n  res.rows.forEach(r => console.log(''  -'', r.slug, '':'', r.label));\n  await client.end();\n}).catch(e => console.error(e.message));\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const res = await client.query(''SELECT id, name, dosage, category, cas_number, sequence, molecular_weight, molecular_formula FROM products ORDER BY name'');\n  console.log(JSON.stringify(res.rows, null, 2));\n  await client.end();\n}).catch(e => console.error(e.message));\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const res = await client.query(''SELECT id, slug, label FROM news_topics WHERE slug IN (\\''lab-protocols\\'', \\''hplc-analysis\\'', \\''storage-handling\\'', \\''molecular-science\\'', \\''quality-standards\\'')'');\n  console.log(JSON.stringify(res.rows, null, 2));\n  await client.end();\n}).catch(e => console.error(e.message));\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"const{Client}=require(''pg'');const c=new Client({connectionString:''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',ssl:{rejectUnauthorized:false}});c.connect().then(async()=>{const p=await c.query(''SELECT name,molecular_weight FROM products WHERE molecular_weight IS NOT NULL'');console.log(''Produits enrichis:'',p.rows.length);p.rows.slice(0,5).forEach(r=>console.log('' -'',r.name,'':'',r.molecular_weight));const a=await c.query(\"\"SELECT title FROM news WHERE slug LIKE ''%peptide%'' OR slug LIKE ''%hplc%'' OR slug LIKE ''%coa%''\"\");console.log(''Articles Lab Notes:'',a.rows.length);a.rows.forEach(r=>console.log('' -'',r.title));await c.end()}).catch(e=>console.error(e.message))\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e:*)",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  // Check resources\n  const res = await client.query(''SELECT slug, title, category_id FROM resources'');\n  console.log(''=== RESOURCES TABLE ==='');\n  res.rows.forEach(r => console.log(''  -'', r.slug));\n  \n  // Check news\n  const news = await client.query(''SELECT slug, title FROM news'');\n  console.log(''\\n=== NEWS TABLE ==='');\n  news.rows.forEach(r => console.log(''  -'', r.slug));\n  \n  await client.end();\n}).catch(e => console.error(e.message));\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  // Supprimer les anciens articles migrés, garder seulement les 5 nouveaux Lab Notes\n  const slugsToKeep = [\n    ''guide-reconstitution-peptides-lyophilises'',\n    ''comprendre-rapports-hplc-peptides'',\n    ''stockage-optimal-peptides-recherche'',\n    ''structure-moleculaire-peptides-synthese'',\n    ''standards-qualite-peptides-recherche''\n  ];\n  \n  await client.query(\n    ''DELETE FROM resources WHERE slug NOT IN ($1, $2, $3, $4, $5)'',\n    slugsToKeep\n  );\n  \n  console.log(''Nettoyage effectué'');\n  \n  // Vérifier\n  const res = await client.query(''SELECT slug, title FROM resources ORDER BY published_at DESC'');\n  console.log(''\\nRessources restantes:'');\n  res.rows.forEach(r => console.log(''  -'', r.title));\n  \n  await client.end();\n}).catch(e => console.error(e.message));\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const cat = await client.query(''SELECT slug, label FROM resource_categories ORDER BY sort_order'');\n  console.log(''=== CATEGORIES ==='');\n  cat.rows.forEach(r => console.log(''  -'', r.slug, '':'', r.label));\n  \n  const res = await client.query(''SELECT slug, title, difficulty_level, status FROM resources ORDER BY published_at DESC'');\n  console.log(''\\n=== RESOURCES ==='');\n  res.rows.forEach(r => console.log(''  -'', r.slug, ''('' + r.difficulty_level + '')'', r.status));\n  \n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  await client.query(\\`\n    INSERT INTO resource_categories (slug, label, description, icon, color, sort_order)\n    VALUES\n      (''lab-protocols'', ''Protocoles Laboratoire'', ''Guides techniques pour la manipulation aseptique.'', ''FlaskConical'', ''primary'', 1),\n      (''hplc-analysis'', ''Analyse HPLC'', ''Comprendre les rapports HPLC et certificats d analyse.'', ''LineChart'', ''info'', 2),\n      (''storage-handling'', ''Stockage & Conservation'', ''Bonnes pratiques de stockage des peptides.'', ''Thermometer'', ''warning'', 3),\n      (''molecular-science'', ''Science Moléculaire'', ''Structure moléculaire et chimie des peptides.'', ''Atom'', ''secondary'', 4),\n      (''quality-standards'', ''Standards Qualité'', ''Normes de qualité et traçabilité.'', ''ShieldCheck'', ''success'', 5)\n    ON CONFLICT (slug) DO UPDATE SET label = EXCLUDED.label, sort_order = EXCLUDED.sort_order\n  \\`);\n  \n  // Update resources to link categories\n  await client.query(\\`UPDATE resources SET category_id = (SELECT id FROM resource_categories WHERE slug = ''lab-protocols'') WHERE slug = ''guide-reconstitution-peptides-lyophilises''\\`);\n  await client.query(\\`UPDATE resources SET category_id = (SELECT id FROM resource_categories WHERE slug = ''hplc-analysis'') WHERE slug = ''comprendre-rapports-hplc-peptides''\\`);\n  await client.query(\\`UPDATE resources SET category_id = (SELECT id FROM resource_categories WHERE slug = ''storage-handling'') WHERE slug = ''stockage-optimal-peptides-recherche''\\`);\n  await client.query(\\`UPDATE resources SET category_id = (SELECT id FROM resource_categories WHERE slug = ''molecular-science'') WHERE slug = ''structure-moleculaire-peptides-synthese''\\`);\n  await client.query(\\`UPDATE resources SET category_id = (SELECT id FROM resource_categories WHERE slug = ''quality-standards'') WHERE slug = ''standards-qualite-peptides-recherche''\\`);\n  \n  console.log(''Categories insérées et resources liées'');\n  \n  const cat = await client.query(''SELECT slug, label FROM resource_categories ORDER BY sort_order'');\n  console.log(''\\n=== CATEGORIES ==='');\n  cat.rows.forEach(r => console.log(''  -'', r.slug, '':'', r.label));\n  \n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const news = await client.query(''SELECT COUNT(*) as count FROM news'');\n  const topics = await client.query(''SELECT COUNT(*) as count FROM news_topics'');\n  const products = await client.query(''SELECT COUNT(*) as count FROM products'');\n  \n  console.log(''=== ÉTAT DES TABLES ==='');\n  console.log(''News:'', news.rows[0].count);\n  console.log(''Topics:'', topics.rows[0].count);\n  console.log(''Products:'', products.rows[0].count);\n  \n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  // Supprimer les users existants avec les UUIDs du seed\n  const adminId = ''a1b2c3d4-e5f6-7890-abcd-ef1234567890'';\n  const userId = ''b2c3d4e5-f6a7-8901-bcde-f23456789012'';\n  \n  await client.query(''DELETE FROM auth.identities WHERE user_id = $1'', [adminId]);\n  await client.query(''DELETE FROM auth.identities WHERE user_id = $1'', [userId]);\n  await client.query(''DELETE FROM auth.users WHERE id = $1'', [adminId]);\n  await client.query(''DELETE FROM auth.users WHERE id = $1'', [userId]);\n  \n  console.log(''Users nettoyés, relance du seed...'');\n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  // Trouver et supprimer les users par email\n  const emails = [''contact@fast-peptides.com'', ''h.bogrand@yopmail.com''];\n  \n  for (const email of emails) {\n    const res = await client.query(''SELECT id FROM auth.users WHERE email = $1'', [email]);\n    if (res.rows.length > 0) {\n      const userId = res.rows[0].id;\n      console.log(''Suppression user:'', email, ''('', userId, '')'');\n      await client.query(''DELETE FROM auth.identities WHERE user_id = $1'', [userId]);\n      await client.query(''DELETE FROM auth.users WHERE id = $1'', [userId]);\n    }\n  }\n  \n  console.log(''Users supprimés'');\n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  connectionString: ''postgresql://postgres:Chipsau59126!3@db.dwomsbawthlktapmtmqu.supabase.co:5432/postgres'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect().then(async () => {\n  const news = await client.query(''SELECT COUNT(*) as count FROM news'');\n  const topics = await client.query(''SELECT COUNT(*) as count FROM news_topics'');\n  const products = await client.query(''SELECT COUNT(*) as count FROM products'');\n  const resources = await client.query(''SELECT COUNT(*) as count FROM resources'');\n  const resCat = await client.query(''SELECT COUNT(*) as count FROM resource_categories'');\n  \n  console.log(''=== ÉTAT DES TABLES ==='');\n  console.log(''Products:'', products.rows[0].count);\n  console.log(''News Topics:'', topics.rows[0].count);\n  console.log(''News:'', news.rows[0].count);\n  console.log(''Resource Categories:'', resCat.rows[0].count);\n  console.log(''Resources:'', resources.rows[0].count);\n  \n  await client.end();\n}).catch(e => console.error(e.message));\")",
      "Bash(node scripts/upload-lab-notes-images.cjs:*)",
      "Bash(node scripts/exec-sql.cjs:*)",
      "Bash(ls:*)",
      "Bash(cat:*)",
      "Bash(xargs:*)",
      "Bash(grep:*)",
      "Bash(timeout 30 npm run dev:*)",
      "Bash(npx supabase functions deploy:*)",
      "Bash(curl:*)",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node -e \"\nconst { Client } = require(''pg'');\nconst client = new Client({\n  host: ''db.dwomsbawthlktapmtmqu.supabase.co'',\n  port: 5432,\n  database: ''postgres'',\n  user: ''postgres'',\n  password: ''Chipsau59126!3'',\n  ssl: { rejectUnauthorized: false }\n});\nclient.connect()\n  .then(() => client.query(''SELECT jobid, jobname, schedule, command FROM cron.job''))\n  .then(res => { console.log(''Jobs pg_cron:''); console.table(res.rows); })\n  .finally(() => client.end());\n\")",
      "Bash(DATABASE_PASSWORD=\"Chipsau59126!3\" node:*)",
      "Bash(find:*)"
    ],
    "deny": [],
    "ask": []
  },
  "maxFileTokens": 50000
}
